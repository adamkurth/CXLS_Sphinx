Water Background Subtraction (Overwrite)
=========================================

This module contains the adaptation of the previous background subtraction programs, called `overwrite_10_2_23.py`. 
The rational behind this is to take two stream files, one with "high" keV values and one with "low" keV values, and analyze their respective `.stream` files.
The program will then take the background from the "low" keV stream file and overwrite the background in the "high" keV stream file.

The program will then "overwrite" the "low" keV stream file, as the "high" keV stream, with the new more accurate peak values.

Imports
^^^^^^^

Most notably, we inherit the `h5_stream_background_subtraction_10_2_23.py` program, to simplify the code. 
We also import `os`, `shutil`, `numpy`, and `h5py` as `h5`.


Duplicate Function
^^^^^^^^^^^^^^^^^^

To compare the two stream files before and after the the overwrite process, we need to duplicate the stream files.

We do this by using the `shutil.copyfile()` function, which takes two arguments, the source file and the destination file.

.. py:function:: duplicate_before_overwrite(filename)

    Duplicates a file by creating a copy with a modified name.

    :param filename: The name of the file to duplicate.
    :type filename: str

    :return: The path of the duplicated file.
    :rtype: str

    .. code-block:: python
        .. code-block:: python

            def duplicate_before_overwrite(filename):
                # taking filename and adding copy extension to it.
                base_file, extension = filename.rsplit('.',1)
                new_base_file = f'{base_file}_copy'
                new_filename = f'{new_base_file}.{extension}'
                duplicate = shutil.copyfile(filename, new_filename)
                return duplicate